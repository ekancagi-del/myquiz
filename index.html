<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ken, what kind of Barbie do you unlock today? üíñ</title>
  <meta name="description" content="A Barbie-core daily vibe check for Ken." />
  <style>
    :root{
      --bg1:#ffe3f3;
      --bg2:#efe3ff;
      --card:#ffffffcc;
      --stroke:#ffffff70;
      --text:#2a1033;
      --muted:#6b3a7a;
      --pink:#ff4fa3;
      --purple:#8a4dff;
      --shadow: 0 18px 60px rgba(45, 10, 70, .18);
      --shadow2: 0 10px 30px rgba(255, 79, 163, .18);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 15% 10%, rgba(255,79,163,.35), transparent 55%),
        radial-gradient(1200px 700px at 85% 20%, rgba(138,77,255,.32), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .wrap{
      width:min(920px, 100%);
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:14px 16px;
      border-radius: 18px;
      background: rgba(255,255,255,.55);
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(12px);
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width:0;
    }
    .sparkle{
      width:42px;height:42px;border-radius:14px;
      background: linear-gradient(135deg, rgba(255,79,163,.95), rgba(138,77,255,.95));
      display:grid;place-items:center;
      box-shadow: 0 14px 28px rgba(138,77,255,.22);
      flex:0 0 auto;
    }
    .sparkle span{font-size:20px; filter: drop-shadow(0 10px 12px rgba(0,0,0,.15));}
    .brand h1{
      font-size:16px;
      margin:0;
      line-height:1.1;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .brand p{
      margin:2px 0 0;
      color:var(--muted);
      font-size:12.5px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .pill{
      padding:8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.75);
      border: 1px solid var(--stroke);
      font-size:12px;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:8px;
      flex:0 0 auto;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: linear-gradient(135deg, var(--pink), var(--purple));
      box-shadow: 0 0 0 4px rgba(255,79,163,.12);
    }

    .card{
      border-radius: var(--radius);
      background: var(--card);
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      padding: 22px;
    }

    .hero{
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:16px;
      align-items:stretch;
    }
    @media (max-width:860px){
      .hero{grid-template-columns:1fr}
    }

    .title{
      font-size:34px;
      line-height:1.06;
      margin:0 0 10px;
      letter-spacing:-0.02em;
    }
    .subtitle{
      margin:0 0 16px;
      color:var(--muted);
      font-size:14.5px;
      line-height:1.35;
    }
    .ctaRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .btn{
      border:0;
      cursor:pointer;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight:700;
      font-size:14px;
      color:#fff;
      background: linear-gradient(135deg, var(--pink), var(--purple));
      box-shadow: 0 16px 30px rgba(255,79,163,.22);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:hover{transform: translateY(-1px); filter:saturate(1.05);}
    .btn:active{transform: translateY(0px) scale(.99);}
    .btnSecondary{
      background: rgba(255,255,255,.75);
      color: var(--text);
      border: 1px solid var(--stroke);
      box-shadow: none;
      font-weight:700;
    }
    .mini{
      font-size:12.5px;
      color:var(--muted);
      display:flex;
      gap:8px;
      align-items:center;
    }
    .mini code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: rgba(255,255,255,.7);
      border: 1px solid var(--stroke);
      padding: 2px 8px;
      border-radius: 999px;
      color: #3a1247;
    }

    .side{
      background: rgba(255,255,255,.62);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      padding: 18px;
      display:flex;
      flex-direction:column;
      gap:12px;
      position:relative;
      overflow:hidden;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      padding:8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.7);
      border: 1px solid var(--stroke);
      width:fit-content;
      color: var(--muted);
    }
    .side h3{margin:0; font-size:14px; letter-spacing:-0.01em;}
    .side ul{
      margin:0;
      padding:0 0 0 18px;
      color: var(--muted);
      font-size:13px;
      line-height:1.4;
    }
    .side::after{
      content:"";
      position:absolute;
      inset:-120px -120px auto auto;
      width:260px;height:260px;
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,79,163,.35), transparent 60%),
                  radial-gradient(circle at 70% 70%, rgba(138,77,255,.32), transparent 60%);
      transform: rotate(18deg);
      pointer-events:none;
    }

    .quiz{
      display:none;
      gap:12px;
    }

    .progressWrap{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }
    .progressBar{
      height:10px;
      background: rgba(255,255,255,.65);
      border: 1px solid var(--stroke);
      border-radius: 999px;
      overflow:hidden;
      flex:1;
    }
    .progressFill{
      height:100%;
      width:0%;
      background: linear-gradient(135deg, var(--pink), var(--purple));
      border-radius: 999px;
      transition: width .25s ease;
    }
    .counter{
      font-size:12px;
      color: var(--muted);
      white-space:nowrap;
    }

    .qText{
      font-size:22px;
      margin: 0 0 12px;
      letter-spacing:-0.01em;
    }

    .answers{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width:720px){
      .answers{grid-template-columns:1fr}
    }
    .ans{
      text-align:left;
      padding:14px 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.72);
      border: 1px solid var(--stroke);
      cursor:pointer;
      font-size:14px;
      line-height:1.25;
      color: #2f143a;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
      box-shadow: 0 8px 18px rgba(45,10,70,.08);
    }
    .ans:hover{
      transform: translateY(-1px);
      box-shadow: 0 14px 28px rgba(45,10,70,.12);
      background: rgba(255,255,255,.82);
    }
    .ans:active{transform: translateY(0px) scale(.995);}

    .footerRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 8px;
    }
    .tinyBtn{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.65);
      color: var(--muted);
      padding:10px 12px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:700;
      font-size:12.5px;
    }
    .tinyBtn:hover{background: rgba(255,255,255,.78);}

    .result{
      display:none;
      text-align:left;
    }
    .resultGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
      align-items:stretch;
    }
    @media (max-width:860px){.resultGrid{grid-template-columns:1fr}}
    .resultBig{
      border-radius: var(--radius);
      background: rgba(255,255,255,.70);
      border: 1px solid var(--stroke);
      padding: 18px;
      box-shadow: 0 18px 45px rgba(45,10,70,.12);
    }
    .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.7);
      border: 1px solid var(--stroke);
      color: var(--muted);
      font-size:12px;
      width:fit-content;
    }
    .resultTitle{
      margin:10px 0 8px;
      font-size:26px;
      letter-spacing:-0.02em;
      line-height:1.1;
    }
    .resultText{
      margin:0 0 14px;
      color: var(--muted);
      font-size:14.5px;
      line-height:1.4;
    }
    .scoreBox{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:12px;
    }
    .scorePill{
      padding:10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.72);
      border: 1px solid var(--stroke);
      color:#3a1247;
      font-weight:800;
      display:flex;
      justify-content:space-between;
      gap:8px;
    }
    .copyBox{
      border-radius: var(--radius);
      background: rgba(255,255,255,.62);
      border: 1px solid var(--stroke);
      padding: 18px;
    }
    textarea{
      width:100%;
      min-height:120px;
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.75);
      padding:12px;
      font-size:13px;
      color:#2f143a;
      resize: vertical;
    }
    .smallNote{font-size:12px;color:var(--muted); margin-top:8px; line-height:1.35;}
    .toast{
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(20, 10, 30, .88);
      color: #fff;
      padding: 10px 12px;
      border-radius: 999px;
      font-size: 12.5px;
      opacity: 0;
      pointer-events:none;
      transition: opacity .2s ease, transform .2s ease;
    }
    .toast.show{
      opacity: 1;
      transform: translateX(-50%) translateY(-2px);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="sparkle" aria-hidden="true"><span>üíñ</span></div>
        <div style="min-width:0">
          <h1>Ken, what kind of Barbie do you unlock today?</h1>
          <p>5 random questions ‚Ä¢ sweet, playful, not cringe ‚Ä¢ Barbie-core vibes</p>
        </div>
      </div>
      <div class="pill" title="Daily vibe check">
        <span class="dot" aria-hidden="true"></span>
        <span>Vibe Check</span>
      </div>
    </div>

    <!-- HOME -->
    <section id="home" class="card hero">
      <div>
        <h2 class="title">Hi Ken. ü´∂</h2>
        <p class="subtitle">
          This is a tiny ‚Äúhow have you been treating Barbie today?‚Äù check.
          Answer honestly (Barbie will know anyway). At the end, you‚Äôll unlock either
          <b>Cute Barbie</b> or <b>Fasti Barbie</b> for today.
        </p>
        <div class="ctaRow">
          <button class="btn" id="startBtn">Start the quiz ‚ú®</button>
          <button class="btn btnSecondary" id="reshuffleBtn" title="Change today‚Äôs random questions">Reshuffle questions üé≤</button>
          <div class="mini"><span>Question bank:</span> <code>30</code> <span>‚Ä¢ Per run:</span> <code>5</code></div>
        </div>
        <p class="smallNote" style="margin-top:14px">
          <b>How it works:</b> Each answer adds points to either ‚ÄúCute‚Äù or ‚ÄúFasti‚Äù. No judgment. Just vibes.
        </p>
      </div>

      <aside class="side">
        <div class="badge">üå∏ Barbie-core interface</div>
        <h3>Ken rules (very serious):</h3>
        <ul>
          <li>Be honest. Barbie can smell lying through Wi-Fi.</li>
          <li>If you get Fasti‚Ä¶ it‚Äôs fixable. Usually with a cute message.</li>
          <li>Yes, there‚Äôs a silly red-color question. No, it‚Äôs not a confession.</li>
        </ul>
        <div class="badge">üìç London ‚Üî Spain energy</div>
      </aside>
    </section>

    <!-- QUIZ -->
    <section id="quiz" class="card quiz" aria-live="polite">
      <div class="progressWrap">
        <div class="progressBar" aria-label="Progress">
          <div class="progressFill" id="progressFill"></div>
        </div>
        <div class="counter" id="counter">Question 1 of 5</div>
      </div>

      <h3 class="qText" id="qText">Question goes here</h3>

      <div class="answers" id="answers"></div>

      <div class="footerRow">
        <button class="tinyBtn" id="restartBtn" title="Start over with new random questions">Restart üîÑ</button>
        <div class="mini"><span>Cute points:</span> <code id="cuteScore">0</code> <span>‚Ä¢ Fasti points:</span> <code id="fastiScore">0</code></div>
      </div>
    </section>

    <!-- RESULT -->
    <section id="result" class="card result">
      <div class="resultGrid">
        <div class="resultBig">
          <div class="tag" id="resultTag">üíû Result</div>
          <h3 class="resultTitle" id="resultTitle">Today Barbie is...</h3>
          <p class="resultText" id="resultText"></p>

          <div class="scoreBox">
            <div class="scorePill"><span>Cute</span><span id="cuteFinal">0</span></div>
            <div class="scorePill"><span>Fasti</span><span id="fastiFinal">0</span></div>
          </div>

          <div class="ctaRow" style="margin-top:14px">
            <button class="btn" id="playAgainBtn">Play again üéÄ</button>
            <button class="btn btnSecondary" id="copyBtn">Copy & send to Ken üíå</button>
          </div>
          <p class="smallNote">
            Tip: If you got Fasti, try one (1) sincere compliment and a tiny apology. Works on Barbie software 9/10 times.
          </p>
        </div>

        <div class="copyBox">
          <div class="badge">Message preview (editable)</div>
          <textarea id="shareText"></textarea>
          <div class="smallNote">
            Paste this into WhatsApp / iMessage / IG DM and watch Ken panic (respectfully).
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="toast" id="toast">Copied üíñ</div>

  <script>
    // ---------- Question Bank (30) ----------
    // Each option has a "type": "cute" or "fasti" to score.
    const QUESTION_BANK = [
      {
        q: "Ken‚Ä¶ when Barbie sends you a cute random thought, your first reaction is:",
        a: [
          { t: "Reply fast and match the vibe (bonus emoji).", type: "cute" },
          { t: "Reply with something sweet that feels like a warm hug.", type: "cute" },
          { t: "See it, smile, then disappear like a magician.", type: "fasti" },
          { t: "Reply with ‚Äúlol‚Äù and nothing else. Dangerous.", type: "fasti" },
        ]
      },
      {
        q: "Barbie texts: ‚ÄúI miss you.‚Äù You respond like:",
        a: [
          { t: "‚ÄúCome here, I‚Äôll fix that.‚Äù (confidence ‚úîÔ∏è)", type: "cute" },
          { t: "‚ÄúI miss you more.‚Äù Simple and correct.", type: "cute" },
          { t: "‚ÄúAww‚Äù and then you change the subject.", type: "fasti" },
          { t: "You read it and start a 3-hour silence era.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is clearly tired, you usually:",
        a: [
          { t: "Ask how her day was ‚Äî like you actually care (you do).", type: "cute" },
          { t: "Offer a tiny comfort: voice note / meme / softness.", type: "cute" },
          { t: "Make it about you. Bold strategy.", type: "fasti" },
          { t: "Say ‚Äúsleep then‚Äù with zero tenderness.", type: "fasti" },
        ]
      },
      {
        q: "Ken, what‚Äôs your ‚Äúgood morning‚Äù energy?",
        a: [
          { t: "A sweet message. Short but personal.", type: "cute" },
          { t: "A cute meme + ‚Äúmorning Barbie üíñ‚Äù.", type: "cute" },
          { t: "I don‚Äôt do mornings. Barbie must guess.", type: "fasti" },
          { t: "A random dry ‚Äúmorning‚Äù like a corporate email.", type: "fasti" },
        ]
      },
      {
        q: "Barbie sends a selfie. You:",
        a: [
          { t: "Compliment something specific. Immediate green flag.", type: "cute" },
          { t: "Say she‚Äôs stunning and mean it like poetry.", type: "cute" },
          { t: "React with üëç (jail).", type: "fasti" },
          { t: "Wait 2 hours then say ‚Äúnice‚Äù. (double jail).", type: "fasti" },
        ]
      },
      {
        q: "When you mess up (tiny or big), you tend to:",
        a: [
          { t: "Own it and apologize like an adult Ken.", type: "cute" },
          { t: "Fix it with actions + a sweet message.", type: "cute" },
          { t: "Act confused: ‚ÄúWhat did I do?‚Äù (classic).", type: "fasti" },
          { t: "Go silent until Barbie forgets. (she won‚Äôt).", type: "fasti" },
        ]
      },
      {
        q: "Ken‚Äôs response speed today is best described as:",
        a: [
          { t: "Fast enough to make Barbie feel chosen.", type: "cute" },
          { t: "Normal-human pace + consistent (attractive).", type: "cute" },
          { t: "Random: sometimes 2 min, sometimes 6 business days.", type: "fasti" },
          { t: "Replying is a rare event.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is excited about something, you:",
        a: [
          { t: "Hype her up like her #1 fan.", type: "cute" },
          { t: "Ask questions and let her yap (respectfully).", type: "cute" },
          { t: "Half-listen while multitasking.", type: "fasti" },
          { t: "Change topic to something you like more.", type: "fasti" },
        ]
      },
      {
        q: "Ken, how do you handle long-distance days?",
        a: [
          { t: "You make it feel close anyway ‚Äî effort shows.", type: "cute" },
          { t: "You send small check-ins that feel intimate.", type: "cute" },
          { t: "You vanish and blame ‚Äúbusy‚Äù.", type: "fasti" },
          { t: "You act like distance means ‚Äúless affection‚Äù.", type: "fasti" },
        ]
      },
      {
        q: "If Barbie says ‚ÄúI‚Äôm anxious,‚Äù you:",
        a: [
          { t: "Stay calm and reassure her ‚Äî steady Ken energy.", type: "cute" },
          { t: "Ask what she needs and actually do it.", type: "cute" },
          { t: "Say ‚Äúdon‚Äôt worry‚Äù with no follow-up.", type: "fasti" },
          { t: "Make a joke that lands‚Ä¶ poorly.", type: "fasti" },
        ]
      },
      {
        q: "Barbie posts something cute. You:",
        a: [
          { t: "You hype it genuinely. Public support ‚úîÔ∏è", type: "cute" },
          { t: "You send a flirty comment or DM.", type: "cute" },
          { t: "You ignore it then ask ‚Äúwhat are you doing?‚Äù", type: "fasti" },
          { t: "You act jealous instead of proud.", type: "fasti" },
        ]
      },
      {
        q: "Ken‚Äôs texting style today is:",
        a: [
          { t: "Playful + affectionate. Balanced like a smoothie.", type: "cute" },
          { t: "Flirty, present, and a bit protective (cute).", type: "cute" },
          { t: "Dry. Like crackers with no water.", type: "fasti" },
          { t: "One-word replies. Barbie is not a chatbot.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is annoyed (a little), you:",
        a: [
          { t: "Notice and soften your tone immediately.", type: "cute" },
          { t: "Tease gently, then fix it fast.", type: "cute" },
          { t: "Double down. Bold. Wrong. Iconic? No.", type: "fasti" },
          { t: "Act like she‚Äôs ‚Äúoverreacting‚Äù. (danger).", type: "fasti" },
        ]
      },
      {
        q: "Barbie asks a simple question. You:",
        a: [
          { t: "Answer clearly and sweetly.", type: "cute" },
          { t: "Answer + add something thoughtful.", type: "cute" },
          { t: "Answer vaguely so she has to ask again.", type: "fasti" },
          { t: "Ignore it and send a meme instead.", type: "fasti" },
        ]
      },
      {
        q: "Ken, what‚Äôs your compliment quality today?",
        a: [
          { t: "Specific, sincere, and a little flirty.", type: "cute" },
          { t: "Soft and romantic without being cheesy.", type: "cute" },
          { t: "Generic: ‚Äúnice‚Äù.", type: "fasti" },
          { t: "None. Barbie must survive on air.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is busy, you:",
        a: [
          { t: "Respect it and still make her feel supported.", type: "cute" },
          { t: "Send one sweet check-in, no pressure.", type: "cute" },
          { t: "Get passive-aggressive about it.", type: "fasti" },
          { t: "Spam messages until she replies.", type: "fasti" },
        ]
      },
      {
        q: "If Barbie says ‚ÄúI had a weird day,‚Äù you:",
        a: [
          { t: "Ask: ‚ÄúWanna talk about it?‚Äù and mean it.", type: "cute" },
          { t: "Offer comfort: voice note, call, or gentle words.", type: "cute" },
          { t: "Say ‚Äúdamn‚Äù and move on.", type: "fasti" },
          { t: "Turn it into a debate. (why.)", type: "fasti" },
        ]
      },
      {
        q: "Ken, how‚Äôs your emoji game today?",
        a: [
          { t: "Cute and balanced. You‚Äôre not afraid of üíñ.", type: "cute" },
          { t: "Minimal but intentional. One ü´∂ can save lives.", type: "cute" },
          { t: "None. Emotional desert.", type: "fasti" },
          { t: "Only üòè at the wrong times.", type: "fasti" },
        ]
      },
      {
        q: "Barbie sends a voice note. You:",
        a: [
          { t: "Listen fully and reply with warmth.", type: "cute" },
          { t: "Reply with your own voice note (top tier).", type: "cute" },
          { t: "Leave it unread like it‚Äôs homework.", type: "fasti" },
          { t: "Reply ‚Äúcan‚Äôt listen rn‚Äù forever.", type: "fasti" },
        ]
      },
      {
        q: "When you‚Äôre wrong, Ken, you:",
        a: [
          { t: "Say ‚ÄúYou‚Äôre right‚Äù without ego drama.", type: "cute" },
          { t: "Admit it and make it cute. Barbie melts.", type: "cute" },
          { t: "Try to win the argument anyway.", type: "fasti" },
          { t: "Act like the topic is now ‚Äúirrelevant‚Äù.", type: "fasti" },
        ]
      },
      {
        q: "Barbie says she‚Äôs craving affection today. You:",
        a: [
          { t: "Give affection ‚Äî words, attention, softness.", type: "cute" },
          { t: "Plan a tiny ‚Äúus‚Äù moment (call, date idea).", type: "cute" },
          { t: "Say ‚Äúsame‚Äù but do nothing.", type: "fasti" },
          { t: "Make it awkward like she asked for a loan.", type: "fasti" },
        ]
      },
      {
        q: "Ken‚Äôs energy when Barbie is quiet is:",
        a: [
          { t: "You check in gently: ‚ÄúYou okay, Barbie?‚Äù", type: "cute" },
          { t: "You give space but stay present.", type: "cute" },
          { t: "You ignore it until it explodes.", type: "fasti" },
          { t: "You assume she‚Äôs mad and get defensive.", type: "fasti" },
        ]
      },
      {
        q: "A tiny jealousy moment happens. You:",
        a: [
          { t: "Communicate calmly. Secure Ken vibes.", type: "cute" },
          { t: "Tease lightly and keep it sweet.", type: "cute" },
          { t: "Accuse. Loudly. Without evidence.", type: "fasti" },
          { t: "Sulky silence mode activated.", type: "fasti" },
        ]
      },
      {
        q: "Ken, your ‚Äúplanning‚Äù level lately is:",
        a: [
          { t: "You suggest calls/dates and follow through.", type: "cute" },
          { t: "You‚Äôre consistent ‚Äî not perfect, but reliable.", type: "cute" },
          { t: "You say ‚Äúwe should‚Äù and then disappear.", type: "fasti" },
          { t: "Planning gives you allergies.", type: "fasti" },
        ]
      },
      {
        q: "Barbie sends you something she‚Äôs proud of. You:",
        a: [
          { t: "Celebrate her like it‚Äôs a holiday.", type: "cute" },
          { t: "Say you‚Äôre proud too ‚Äî and be specific.", type: "cute" },
          { t: "React with ‚Äúcool‚Äù and scroll.", type: "fasti" },
          { t: "Make a joke that steals her moment.", type: "fasti" },
        ]
      },
      {
        q: "Ken, your effort level in making Barbie smile today is:",
        a: [
          { t: "High. You‚Äôre actively trying. It shows.", type: "cute" },
          { t: "Medium but sweet. You still show up.", type: "cute" },
          { t: "Low. Barbie is carrying the vibe alone.", type: "fasti" },
          { t: "Negative. You‚Äôre testing her patience.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is talking, you:",
        a: [
          { t: "Listen like she‚Äôs your favorite playlist.", type: "cute" },
          { t: "Remember details (Barbie notices).", type: "cute" },
          { t: "Interrupt with your own story.", type: "fasti" },
          { t: "Reply late with ‚Äúwhat?‚Äù", type: "fasti" },
        ]
      },
      {
        q: "If Barbie asks for reassurance, you:",
        a: [
          { t: "Give it warmly, no shame, no games.", type: "cute" },
          { t: "Say something simple but real: ‚ÄúI‚Äôm here.‚Äù", type: "cute" },
          { t: "Tease her for needing it.", type: "fasti" },
          { t: "Avoid it because feelings scare you.", type: "fasti" },
        ]
      },
      {
        q: "Ken‚Ä¶ about your totally harmless red-color obsession üî¥:",
        a: [
          { t: "You make it funny and include Barbie in the joke.", type: "cute" },
          { t: "You send a cute ‚Äúred alert‚Äù meme and move on.", type: "cute" },
          { t: "You act like red is a personality. Barbie sighs.", type: "fasti" },
          { t: "You bring it up in serious moments. Ken. Please.", type: "fasti" },
        ]
      },
      {
        q: "Last one, Ken: if Barbie says ‚ÄúI want more us,‚Äù you:",
        a: [
          { t: "Step up gently. Consistency is sexy.", type: "cute" },
          { t: "Make a small plan and actually do it.", type: "cute" },
          { t: "Say ‚Äúokay‚Äù and change nothing.", type: "fasti" },
          { t: "Get defensive like she attacked you.", type: "fasti" },
        ]
      },
    ];

    // ---------- State ----------
    const homeEl = document.getElementById("home");
    const quizEl = document.getElementById("quiz");
    const resultEl = document.getElementById("result");

    const startBtn = document.getElementById("startBtn");
    const reshuffleBtn = document.getElementById("reshuffleBtn");
    const restartBtn = document.getElementById("restartBtn");
    const playAgainBtn = document.getElementById("playAgainBtn");
    const copyBtn = document.getElementById("copyBtn");

    const qTextEl = document.getElementById("qText");
    const answersEl = document.getElementById("answers");
    const progressFill = document.getElementById("progressFill");
    const counterEl = document.getElementById("counter");

    const cuteScoreEl = document.getElementById("cuteScore");
    const fastiScoreEl = document.getElementById("fastiScore");

    const resultTag = document.getElementById("resultTag");
    const resultTitle = document.getElementById("resultTitle");
    const resultText = document.getElementById("resultText");
    const cuteFinal = document.getElementById("cuteFinal");
    const fastiFinal = document.getElementById("fastiFinal");
    const shareText = document.getElementById("shareText");

    const toast = document.getElementById("toast");

    const PER_RUN = 5;

    let runQuestions = [];
    let idx = 0;
    let cute = 0;
    let fasti = 0;

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 1200);
    }

    function shuffle(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function pickRandomQuestions(){
      const shuffled = shuffle(QUESTION_BANK);
      runQuestions = shuffled.slice(0, PER_RUN);
      idx = 0;
      cute = 0;
      fasti = 0;
      updateScoreMini();
    }

    function updateScoreMini(){
      cuteScoreEl.textContent = String(cute);
      fastiScoreEl.textContent = String(fasti);
    }

    function renderQuestion(){
      const qObj = runQuestions[idx];
      counterEl.textContent = `Question ${idx+1} of ${PER_RUN}`;
      const pct = Math.round((idx / PER_RUN) * 100);
      progressFill.style.width = pct + "%";

      qTextEl.textContent = qObj.q;
      answersEl.innerHTML = "";

      qObj.a.forEach((opt) => {
        const btn = document.createElement("button");
        btn.className = "ans";
        btn.type = "button";
        btn.textContent = opt.t;
        btn.addEventListener("click", () => {
          if(opt.type === "cute") cute += 1;
          else fasti += 1;

          updateScoreMini();

          // next
          idx += 1;
          if(idx >= PER_RUN){
            progressFill.style.width = "100%";
            finish();
          } else {
            renderQuestion();
          }
        });
        answersEl.appendChild(btn);
      });
    }

    function startQuiz(){
      pickRandomQuestions();
      homeEl.style.display = "none";
      resultEl.style.display = "none";
      quizEl.style.display = "grid";
      renderQuestion();
      window.scrollTo({top:0, behavior:"smooth"});
    }

    function reshuffleOnly(){
      pickRandomQuestions();
      showToast("New question set üé≤");
    }

    function finish(){
      quizEl.style.display = "none";
      resultEl.style.display = "block";

      cuteFinal.textContent = String(cute);
      fastiFinal.textContent = String(fasti);

      const isCute = cute >= fasti;

      if(isCute){
        resultTag.textContent = "üíó Cute Barbie unlocked";
        resultTitle.textContent = "Today Barbie is Cute üíï";
        resultText.textContent =
          "You unlocked soft smiles, sweet messages, and extra affection. " +
          "Keep this energy, Ken ‚Äî Barbie noticed.";
      } else {
        resultTag.textContent = "üòå Fasti Barbie unlocked";
        resultTitle.textContent = "Today Barbie is a little Fasti üòå";
        resultText.textContent =
          "Not mad. Just‚Ä¶ slightly unimpressed. " +
          "A sincere message and a tiny bit of effort might fix everything, Ken.";
      }

      const share =
`Ken‚Ä¶ your Barbie vibe check results are in üíñ

Result: ${isCute ? "Cute Barbie üíï" : "Fasti Barbie üòå"}
Cute points: ${cute}
Fasti points: ${fasti}

${isCute
  ? "Keep doing what you‚Äôre doing. Today you made Barbie feel chosen ü´∂"
  : "Try: one sweet compliment + one genuine check-in. Barbie is willing to reconsider üòå"}

‚Äî Your Barbie (London edition)`;
      shareText.value = share;
      window.scrollTo({top:0, behavior:"smooth"});
    }

    function playAgain(){
      startQuiz();
    }

    async function copyShare(){
      try{
        await navigator.clipboard.writeText(shareText.value);
        showToast("Copied üíñ");
      } catch(e){
        // fallback
        shareText.select();
        document.execCommand("copy");
        showToast("Copied üíñ");
      }
    }

    // Buttons
    startBtn.addEventListener("click", startQuiz);
    reshuffleBtn.addEventListener("click", () => {
      reshuffleOnly();
      showToast("Ready when you are ‚ú®");
    });
    restartBtn.addEventListener("click", startQuiz);
    playAgainBtn.addEventListener("click", playAgain);
    copyBtn.addEventListener("click", copyShare);

    // Prepare a question set on load (so reshuffle works immediately)
    pickRandomQuestions();
  </script>
</body>
</html>
