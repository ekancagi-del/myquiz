<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ken, what kind of Barbie do you unlock today? üíñ</title>
  <meta name="description" content="A Barbie-core daily vibe check for Ken." />
  <style>
    :root{
      --bg1:#ffe6f4;
      --bg2:#efe6ff;
      --card: rgba(255,255,255,.72);
      --stroke: rgba(255,255,255,.65);
      --text:#2a1033;
      --muted:#6b3a7a;
      --pink:#ff4fa3;
      --purple:#8a4dff;
      --shadow: 0 18px 55px rgba(45, 10, 70, .16);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1000px 620px at 15% 10%, rgba(255,79,163,.28), transparent 55%),
        radial-gradient(1000px 620px at 85% 20%, rgba(138,77,255,.26), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .wrap{
      width:min(760px, 100%);
      display:grid;
      gap:14px;
    }
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.52);
      border: 1px solid var(--stroke);
      box-shadow: 0 12px 28px rgba(45,10,70,.10);
      backdrop-filter: blur(12px);
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .logo{
      width:38px;height:38px;border-radius:14px;
      background: linear-gradient(135deg, rgba(255,79,163,.95), rgba(138,77,255,.95));
      display:grid;place-items:center;
      box-shadow: 0 14px 24px rgba(138,77,255,.18);
      flex:0 0 auto;
    }
    .logo span{font-size:18px; filter: drop-shadow(0 10px 12px rgba(0,0,0,.12));}
    .brand h1{
      font-size:14px;
      margin:0;
      line-height:1.15;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      letter-spacing:-0.01em;
    }
    .brand p{
      margin:2px 0 0;
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .pill{
      padding:7px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.72);
      border: 1px solid var(--stroke);
      font-size:12px;
      color:var(--muted);
      display:flex;
      align-items:center;
      gap:8px;
      flex:0 0 auto;
    }
    .dot{
      width:9px;height:9px;border-radius:999px;
      background: linear-gradient(135deg, var(--pink), var(--purple));
      box-shadow: 0 0 0 4px rgba(255,79,163,.10);
    }

    .card{
      border-radius: var(--radius);
      background: var(--card);
      border: 1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(14px);
      padding: 20px;
    }

    /* Minimal home */
    .homeTitle{
      font-size:28px;
      line-height:1.1;
      margin:0 0 8px;
      letter-spacing:-0.02em;
    }
    .homeSub{
      margin:0 0 14px;
      color:var(--muted);
      font-size:14px;
      line-height:1.45;
    }
    .ctaRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .btn{
      border:0;
      cursor:pointer;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight:800;
      font-size:14px;
      color:#fff;
      background: linear-gradient(135deg, var(--pink), var(--purple));
      box-shadow: 0 14px 24px rgba(255,79,163,.18);
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:hover{transform: translateY(-1px); filter:saturate(1.05);}
    .btn:active{transform: translateY(0px) scale(.99);}
    .btnSecondary{
      background: rgba(255,255,255,.74);
      color: var(--text);
      border: 1px solid var(--stroke);
      box-shadow: none;
    }
    .mini{
      font-size:12.5px;
      color:var(--muted);
      display:flex;
      gap:8px;
      align-items:center;
    }
    .mini code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: rgba(255,255,255,.7);
      border: 1px solid var(--stroke);
      padding: 2px 8px;
      border-radius: 999px;
      color: #3a1247;
    }

    /* Quiz */
    .quiz{display:none; gap:10px;}
    .progressWrap{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 8px;
    }
    .progressBar{
      height:9px;
      background: rgba(255,255,255,.62);
      border: 1px solid var(--stroke);
      border-radius: 999px;
      overflow:hidden;
      flex:1;
    }
    .progressFill{
      height:100%;
      width:0%;
      background: linear-gradient(135deg, var(--pink), var(--purple));
      border-radius: 999px;
      transition: width .22s ease;
    }
    .counter{
      font-size:12px;
      color: var(--muted);
      white-space:nowrap;
    }
    .qText{
      font-size:20px;
      margin: 0 0 10px;
      letter-spacing:-0.01em;
      line-height:1.25;
    }
    .answers{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    @media (max-width:720px){
      .answers{grid-template-columns:1fr}
    }
    .ans{
      text-align:left;
      padding:14px 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.76);
      border: 1px solid var(--stroke);
      cursor:pointer;
      font-size:14px;
      line-height:1.25;
      color: #2f143a;
      transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
      box-shadow: 0 8px 16px rgba(45,10,70,.08);
    }
    .ans:hover{
      transform: translateY(-1px);
      box-shadow: 0 14px 24px rgba(45,10,70,.12);
      background: rgba(255,255,255,.86);
    }
    .ans:active{transform: translateY(0px) scale(.995);}

    .footerRow{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 8px;
    }
    .tinyBtn{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.65);
      color: var(--muted);
      padding:10px 12px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:800;
      font-size:12.5px;
    }
    .tinyBtn:hover{background: rgba(255,255,255,.78);}

    /* Result (minimal) */
    .result{display:none;}
    .tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.74);
      border: 1px solid var(--stroke);
      color: var(--muted);
      font-size:12px;
      width:fit-content;
    }
    .resultTitle{
      margin:10px 0 8px;
      font-size:26px;
      letter-spacing:-0.02em;
      line-height:1.1;
    }
    .resultText{
      margin:0 0 14px;
      color: var(--muted);
      font-size:14.5px;
      line-height:1.5;
    }
    .scoreRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:12px;
    }
    .scorePill{
      padding:10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.76);
      border: 1px solid var(--stroke);
      color:#3a1247;
      font-weight:900;
      display:flex;
      justify-content:space-between;
      gap:10px;
      min-width: 160px;
    }
    .softNote{
      margin-top:12px;
      color:var(--muted);
      font-size:12.5px;
      line-height:1.45;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"><span>üíñ</span></div>
        <div style="min-width:0">
          <h1>Ken, what kind of Barbie do you unlock today?</h1>
          <p>5 random questions ‚Ä¢ sweet & real ‚Ä¢ Barbie-core</p>
        </div>
      </div>
      <div class="pill" title="Daily vibe check">
        <span class="dot" aria-hidden="true"></span>
        <span>Vibe Check</span>
      </div>
    </div>

    <!-- HOME (minimal) -->
    <section id="home" class="card">
      <h2 class="homeTitle">Hi Ken. üíó</h2>
      <p class="homeSub">
        Quick check-in: how did you treat Barbie today?
        Answer honestly. At the end, you‚Äôll unlock either <b>Cute Barbie</b> or <b>Fasti Barbie</b> for today.
      </p>

      <div class="ctaRow">
        <button class="btn" id="startBtn">Start ‚ú®</button>
        <button class="btn btnSecondary" id="reshuffleBtn" title="New random set for today">New questions üé≤</button>
        <div class="mini"><span>Bank:</span> <code>30</code> <span>‚Ä¢ Today:</span> <code>5</code></div>
      </div>

      <p class="softNote">
        P.S. Fasti doesn‚Äôt mean ‚Äúbad‚Äù. It means Barbie is‚Ä¶ <i>slightly unimpressed</i>. Still adorable though üòå
      </p>
    </section>

    <!-- QUIZ -->
    <section id="quiz" class="card quiz" aria-live="polite">
      <div class="progressWrap">
        <div class="progressBar" aria-label="Progress">
          <div class="progressFill" id="progressFill"></div>
        </div>
        <div class="counter" id="counter">Question 1 of 5</div>
      </div>

      <h3 class="qText" id="qText">Question goes here</h3>
      <div class="answers" id="answers"></div>

      <div class="footerRow">
        <button class="tinyBtn" id="restartBtn" title="Restart with a fresh random set">Restart üîÑ</button>
        <div class="mini">
          <span>Cute:</span> <code id="cuteScore">0</code>
          <span>‚Ä¢</span>
          <span>Fasti:</span> <code id="fastiScore">0</code>
        </div>
      </div>
    </section>

    <!-- RESULT (minimal, no copy/preview) -->
    <section id="result" class="card result">
      <div class="tag" id="resultTag">üíû Result</div>
      <h3 class="resultTitle" id="resultTitle">Today Barbie is...</h3>
      <p class="resultText" id="resultText"></p>

      <div class="scoreRow">
        <div class="scorePill"><span>Cute</span><span id="cuteFinal">0</span></div>
        <div class="scorePill"><span>Fasti</span><span id="fastiFinal">0</span></div>
      </div>

      <div class="ctaRow" style="margin-top:14px">
        <button class="btn" id="playAgainBtn">Play again üéÄ</button>
        <button class="btn btnSecondary" id="goHomeBtn">Back to start</button>
      </div>

      <p class="softNote" id="resultNote"></p>
    </section>
  </div>

  <script>
    // =========================
    // Question Bank (30) ‚Äî slightly more intimate / natural
    // =========================
    const QUESTION_BANK = [
      {
        q: "Ken‚Ä¶ when Barbie texts you something cute and random, you usually:",
        a: [
          { t: "Answer fast and match the energy (yes, with an emoji).", type: "cute" },
          { t: "Reply sweetly and make her feel like you actually missed her.", type: "cute" },
          { t: "Read it, smile, then vanish like it‚Äôs a talent show.", type: "fasti" },
          { t: "Hit her with ‚Äúlol‚Äù and call it communication.", type: "fasti" },
        ]
      },
      {
        q: "Barbie says: ‚ÄúI miss you.‚Äù You reply like:",
        a: [
          { t: "‚ÄúCome here. I‚Äôll fix that.‚Äù (confident Ken.)", type: "cute" },
          { t: "‚ÄúI miss you more.‚Äù Simple, effective, hot.", type: "cute" },
          { t: "‚ÄúAww‚Äù and then you switch topics. (Ken??)", type: "fasti" },
          { t: "You leave her on read and start a silence era.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is clearly tired today, you:",
        a: [
          { t: "Ask how she‚Äôs doing and actually stay present.", type: "cute" },
          { t: "Send something soft: a voice note / sweet line / comfort meme.", type: "cute" },
          { t: "Make it about your day instead.", type: "fasti" },
          { t: "Say ‚Äúsleep then‚Äù with zero warmth.", type: "fasti" },
        ]
      },
      {
        q: "Your ‚Äúgood morning‚Äù energy lately is:",
        a: [
          { t: "Short, personal, sweet. (Barbie feels chosen.)", type: "cute" },
          { t: "A cute meme + ‚Äúmorning Barbie üíñ‚Äù.", type: "cute" },
          { t: "No message. Barbie must guess your mood.", type: "fasti" },
          { t: "A dry ‚Äúmorning‚Äù like a work email.", type: "fasti" },
        ]
      },
      {
        q: "Barbie sends you a selfie. You:",
        a: [
          { t: "Compliment something specific. Immediate green flag.", type: "cute" },
          { t: "Say she looks unreal. And you mean it.", type: "cute" },
          { t: "React with üëç (Ken please).", type: "fasti" },
          { t: "Wait ages and say ‚Äúnice‚Äù. (criminal.)", type: "fasti" },
        ]
      },
      {
        q: "When you mess up (even a little), you tend to:",
        a: [
          { t: "Own it and apologize properly. Mature Ken vibes.", type: "cute" },
          { t: "Fix it with actions + a sweet message.", type: "cute" },
          { t: "Act confused: ‚ÄúWhat did I do?‚Äù (classic move).", type: "fasti" },
          { t: "Go quiet until it magically disappears.", type: "fasti" },
        ]
      },
      {
        q: "Your reply speed today is best described as:",
        a: [
          { t: "Fast enough to make Barbie feel wanted.", type: "cute" },
          { t: "Normal but consistent (very attractive).", type: "cute" },
          { t: "Random: 2 minutes or 6 business days.", type: "fasti" },
          { t: "Rare. Like a solar eclipse.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is excited about something, you:",
        a: [
          { t: "Hype her up like her #1 fan.", type: "cute" },
          { t: "Ask questions and let her talk ‚Äî you actually listen.", type: "cute" },
          { t: "Half-listen while doing 3 other things.", type: "fasti" },
          { t: "Change the topic to your interests.", type: "fasti" },
        ]
      },
      {
        q: "Long-distance days (London ‚Üî Spain) ‚Äî you usually:",
        a: [
          { t: "Make it feel close anyway. Small effort, big impact.", type: "cute" },
          { t: "Send check-ins that feel intimate, not forced.", type: "cute" },
          { t: "Disappear and blame ‚Äúbusy‚Äù.", type: "fasti" },
          { t: "Act like distance means less affection.", type: "fasti" },
        ]
      },
      {
        q: "If Barbie says she‚Äôs anxious, you:",
        a: [
          { t: "Stay calm and reassure her ‚Äî steady Ken energy.", type: "cute" },
          { t: "Ask what she needs and follow through.", type: "cute" },
          { t: "Say ‚Äúdon‚Äôt worry‚Äù and stop there.", type: "fasti" },
          { t: "Make a joke that lands‚Ä¶ badly.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is a little quiet, you:",
        a: [
          { t: "Check in gently: ‚ÄúYou okay, Barbie?‚Äù", type: "cute" },
          { t: "Give space but stay present ‚Äî no coldness.", type: "cute" },
          { t: "Ignore it until it turns into drama.", type: "fasti" },
          { t: "Get defensive like you‚Äôre already accused.", type: "fasti" },
        ]
      },
      {
        q: "Ken‚Äôs texting vibe today is:",
        a: [
          { t: "Playful + affectionate. Perfect balance.", type: "cute" },
          { t: "Soft and flirty ‚Äî Barbie feels it.", type: "cute" },
          { t: "Dry. Like crackers with no water.", type: "fasti" },
          { t: "One-word replies. Barbie is not a survey.", type: "fasti" },
        ]
      },
      {
        q: "If Barbie is annoyed (just a little), you:",
        a: [
          { t: "Notice and soften your tone immediately.", type: "cute" },
          { t: "Tease gently, then fix it fast.", type: "cute" },
          { t: "Double down. Bold. Wrong.", type: "fasti" },
          { t: "Say she‚Äôs overreacting. (danger zone.)", type: "fasti" },
        ]
      },
      {
        q: "Barbie asks a simple question. You:",
        a: [
          { t: "Answer clearly and sweetly.", type: "cute" },
          { t: "Answer + add something thoughtful.", type: "cute" },
          { t: "Answer vaguely so she has to ask again.", type: "fasti" },
          { t: "Ignore it and send a meme instead.", type: "fasti" },
        ]
      },
      {
        q: "Your compliment quality today is:",
        a: [
          { t: "Specific, sincere, a bit flirty.", type: "cute" },
          { t: "Soft and romantic without being cheesy.", type: "cute" },
          { t: "Generic: ‚Äúnice‚Äù.", type: "fasti" },
          { t: "None. Barbie must survive on oxygen.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is busy, you:",
        a: [
          { t: "Respect it and still make her feel supported.", type: "cute" },
          { t: "Send one sweet check-in, no pressure.", type: "cute" },
          { t: "Get passive-aggressive about it.", type: "fasti" },
          { t: "Spam messages until she replies.", type: "fasti" },
        ]
      },
      {
        q: "Barbie says: ‚ÄúI had a weird day.‚Äù You:",
        a: [
          { t: "Ask if she wants to talk ‚Äî and you really mean it.", type: "cute" },
          { t: "Offer comfort (call / voice note / gentle words).", type: "cute" },
          { t: "Say ‚Äúdamn‚Äù and move on.", type: "fasti" },
          { t: "Turn it into a debate. Why, Ken.", type: "fasti" },
        ]
      },
      {
        q: "Your emoji game today is:",
        a: [
          { t: "Cute and balanced. You‚Äôre not scared of üíñ.", type: "cute" },
          { t: "Minimal but meaningful ‚Äî one ü´∂ can fix a lot.", type: "cute" },
          { t: "None. Emotional desert.", type: "fasti" },
          { t: "Only üòè at the wrong times.", type: "fasti" },
        ]
      },
      {
        q: "Barbie sends a voice note. You:",
        a: [
          { t: "Listen properly and reply warmly.", type: "cute" },
          { t: "Reply with your own voice note (top tier).", type: "cute" },
          { t: "Leave it there like homework.", type: "fasti" },
          { t: "Say ‚Äúcan‚Äôt listen rn‚Äù forever.", type: "fasti" },
        ]
      },
      {
        q: "When you‚Äôre wrong, Ken, you:",
        a: [
          { t: "Say ‚ÄúYou‚Äôre right‚Äù with zero ego drama.", type: "cute" },
          { t: "Admit it and make it cute. Barbie melts.", type: "cute" },
          { t: "Try to win the argument anyway.", type: "fasti" },
          { t: "Say it‚Äôs ‚Äúnot important‚Äù now.", type: "fasti" },
        ]
      },
      {
        q: "Barbie wants affection today. You:",
        a: [
          { t: "Give it ‚Äî words, attention, softness.", type: "cute" },
          { t: "Make a tiny plan (call/date idea) and follow through.", type: "cute" },
          { t: "Say ‚Äúsame‚Äù but do nothing.", type: "fasti" },
          { t: "Make it awkward like she asked for a loan.", type: "fasti" },
        ]
      },
      {
        q: "A tiny jealousy moment happens. You:",
        a: [
          { t: "Communicate calmly. Secure Ken energy.", type: "cute" },
          { t: "Tease lightly and keep it sweet.", type: "cute" },
          { t: "Accuse loudly with no proof.", type: "fasti" },
          { t: "Go silent and sulky.", type: "fasti" },
        ]
      },
      {
        q: "Your planning level lately is:",
        a: [
          { t: "You suggest calls/dates and follow through.", type: "cute" },
          { t: "Not perfect, but reliable. Barbie trusts you.", type: "cute" },
          { t: "You say ‚Äúwe should‚Äù and disappear.", type: "fasti" },
          { t: "Planning gives you allergies.", type: "fasti" },
        ]
      },
      {
        q: "Barbie shares something she‚Äôs proud of. You:",
        a: [
          { t: "Celebrate her like it‚Äôs a holiday.", type: "cute" },
          { t: "Tell her you‚Äôre proud ‚Äî and say why.", type: "cute" },
          { t: "React with ‚Äúcool‚Äù and scroll.", type: "fasti" },
          { t: "Make a joke that steals her moment.", type: "fasti" },
        ]
      },
      {
        q: "Your effort to make Barbie smile today is:",
        a: [
          { t: "High. You‚Äôre trying and it shows.", type: "cute" },
          { t: "Steady. Small things, consistent.", type: "cute" },
          { t: "Low. Barbie is carrying the vibe alone.", type: "fasti" },
          { t: "Negative. You‚Äôre testing her patience.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is talking, you:",
        a: [
          { t: "Listen like she‚Äôs your favorite song.", type: "cute" },
          { t: "Remember little details (Barbie notices).", type: "cute" },
          { t: "Interrupt and turn it into your story.", type: "fasti" },
          { t: "Reply late with ‚Äúhuh?‚Äù", type: "fasti" },
        ]
      },
      {
        q: "If Barbie asks for reassurance, you:",
        a: [
          { t: "Give it warmly. No games.", type: "cute" },
          { t: "Say something simple and real: ‚ÄúI‚Äôm here.‚Äù", type: "cute" },
          { t: "Tease her for needing it.", type: "fasti" },
          { t: "Avoid it because feelings are scary.", type: "fasti" },
        ]
      },
      {
        q: "Ken‚Ä¶ about your totally harmless red-color obsession üî¥:",
        a: [
          { t: "You keep it playful and include Barbie in the joke.", type: "cute" },
          { t: "You send a cute ‚Äúred alert‚Äù moment and move on.", type: "cute" },
          { t: "You act like red is your whole personality.", type: "fasti" },
          { t: "You bring it up in serious moments. Ken. Please.", type: "fasti" },
        ]
      },
      {
        q: "If Barbie says: ‚ÄúI want more ‚Äòus‚Äô,‚Äù you:",
        a: [
          { t: "Step up gently. Consistency is sexy.", type: "cute" },
          { t: "Make a small plan and actually do it.", type: "cute" },
          { t: "Say ‚Äúokay‚Äù and change nothing.", type: "fasti" },
          { t: "Get defensive like she attacked you.", type: "fasti" },
        ]
      },
      {
        q: "When Barbie is being extra cute on purpose, you:",
        a: [
          { t: "Match it. You don‚Äôt leave her hanging.", type: "cute" },
          { t: "Give her attention and make her feel wanted.", type: "cute" },
          { t: "Pretend you didn‚Äôt notice.", type: "fasti" },
          { t: "Act too cool for it. (Ken, no.)", type: "fasti" },
        ]
      },
    ];

    // =========================
    // State
    // =========================
    const homeEl = document.getElementById("home");
    const quizEl = document.getElementById("quiz");
    const resultEl = document.getElementById("result");

    const startBtn = document.getElementById("startBtn");
    const reshuffleBtn = document.getElementById("reshuffleBtn");
    const restartBtn = document.getElementById("restartBtn");
    const playAgainBtn = document.getElementById("playAgainBtn");
    const goHomeBtn = document.getElementById("goHomeBtn");

    const qTextEl = document.getElementById("qText");
    const answersEl = document.getElementById("answers");
    const progressFill = document.getElementById("progressFill");
    const counterEl = document.getElementById("counter");

    const cuteScoreEl = document.getElementById("cuteScore");
    const fastiScoreEl = document.getElementById("fastiScore");

    const resultTag = document.getElementById("resultTag");
    const resultTitle = document.getElementById("resultTitle");
    const resultText = document.getElementById("resultText");
    const cuteFinal = document.getElementById("cuteFinal");
    const fastiFinal = document.getElementById("fastiFinal");
    const resultNote = document.getElementById("resultNote");

    const PER_RUN = 5;

    let runQuestions = [];
    let idx = 0;
    let cute = 0;
    let fasti = 0;

    function shuffle(arr){
      const a = arr.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function pickRandomQuestions(){
      const shuffled = shuffle(QUESTION_BANK);
      runQuestions = shuffled.slice(0, PER_RUN);
      idx = 0;
      cute = 0;
      fasti = 0;
      updateScoreMini();
    }

    function updateScoreMini(){
      cuteScoreEl.textContent = String(cute);
      fastiScoreEl.textContent = String(fasti);
    }

    function renderQuestion(){
      const qObj = runQuestions[idx];
      counterEl.textContent = `Question ${idx+1} of ${PER_RUN}`;
      const pct = Math.round((idx / PER_RUN) * 100);
      progressFill.style.width = pct + "%";

      qTextEl.textContent = qObj.q;
      answersEl.innerHTML = "";

      qObj.a.forEach((opt) => {
        const btn = document.createElement("button");
        btn.className = "ans";
        btn.type = "button";
        btn.textContent = opt.t;
        btn.addEventListener("click", () => {
          if(opt.type === "cute") cute += 1;
          else fasti += 1;

          updateScoreMini();

          idx += 1;
          if(idx >= PER_RUN){
            progressFill.style.width = "100%";
            finish();
          } else {
            renderQuestion();
          }
        });
        answersEl.appendChild(btn);
      });
    }

    function startQuiz(){
      pickRandomQuestions();
      homeEl.style.display = "none";
      resultEl.style.display = "none";
      quizEl.style.display = "grid";
      renderQuestion();
      window.scrollTo({top:0, behavior:"smooth"});
    }

    function finish(){
      quizEl.style.display = "none";
      resultEl.style.display = "block";

      cuteFinal.textContent = String(cute);
      fastiFinal.textContent = String(fasti);

      const isCute = cute >= fasti;

      if(isCute){
        resultTag.textContent = "üíó Cute Barbie";
        resultTitle.textContent = "Today Barbie is Cute üíï";
        resultText.textContent =
          "Ken, you unlocked soft smiles, sweet energy, and extra affection today. " +
          "Keep this vibe ‚Äî Barbie definitely felt it.";
        resultNote.textContent =
          "Tiny bonus: send Barbie one specific compliment right now. It‚Äôll hit 10x harder than you think ü´∂";
      } else {
        resultTag.textContent = "üòå Fasti Barbie";
        resultTitle.textContent = "Today Barbie is a little Fasti üòå";
        resultText.textContent =
          "Ken‚Ä¶ today Barbie is slightly unimpressed. Not angry. Just‚Ä¶ looking at you with that look. " +
          "You can still fix it, though.";
        resultNote.textContent =
          "Quick repair kit: 1) a sincere check-in, 2) a tiny apology if needed, 3) one sweet line. Do it gently üòå";
      }

      window.scrollTo({top:0, behavior:"smooth"});
    }

    // Buttons
    startBtn.addEventListener("click", startQuiz);
    reshuffleBtn.addEventListener("click", () => {
      pickRandomQuestions();
      // stays on home; just changes the set for when he starts
    });
    restartBtn.addEventListener("click", startQuiz);
    playAgainBtn.addEventListener("click", startQuiz);
    goHomeBtn.addEventListener("click", () => {
      resultEl.style.display = "none";
      quizEl.style.display = "none";
      homeEl.style.display = "block";
      window.scrollTo({top:0, behavior:"smooth"});
    });

    // Prepare a question set on load
    pickRandomQuestions();
  </script>
</body>
</html>
